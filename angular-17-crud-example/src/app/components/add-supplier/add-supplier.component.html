<div class="container-fluid animate-fade-in">
  <h1 class="page-heading mb-4">
    <a routerLink="/suppliers" class="text-decoration-none me-3">
      <i class="fas fa-arrow-left"></i>
    </a>
    Add New Supplier
  </h1>

  <div class="row">
    <div class="col-md-8">
      <div class="card">
        <div class="card-body">
          <div *ngIf="!submitted">
            <form (ngSubmit)="saveSupplier()" #supplierForm="ngForm">
              <!-- Company Name -->
              <div class="mb-3">
                <label for="supplierName" class="form-label">Company Name <span class="text-danger">*</span></label>
                <input
                  type="text"
                  class="form-control"
                  id="supplierName"
                  required
                  [(ngModel)]="supplier.supplier_name"
                  name="supplier_name"
                  #name="ngModel"
                  placeholder="Enter company name"
                />
                <div class="text-danger mt-1" *ngIf="name.invalid && name.touched">
                  Company name is required.
                </div>
              </div>

              <div class="row">
                <!-- Contact Person -->
                <div class="col-md-6 mb-3">
                  <label for="contactPerson" class="form-label">Contact Person <span class="text-danger">*</span></label>
                  <input
                    type="text"
                    class="form-control"
                    id="contactPerson"
                    required
                    [(ngModel)]="supplier.contact_person"
                    name="contact_person"
                    #contactPerson="ngModel"
                    placeholder="Enter contact person name"
                  />
                  <div class="text-danger mt-1" *ngIf="contactPerson.invalid && contactPerson.touched">
                    Contact person is required.
                  </div>
                </div>

                <!-- Contact Phone -->
                <div class="col-md-6 mb-3">
                  <label for="contactPhone" class="form-label">Phone Number</label>
                  <input
                    type="tel"
                    class="form-control"
                    id="contactPhone"
                    [(ngModel)]="supplier.contact_phone"
                    name="contact_phone"
                    placeholder="Enter phone number"
                  />
                </div>
              </div>

              <!-- Contact Email -->
              <div class="mb-3">
                <label for="contactEmail" class="form-label">Email <span class="text-danger">*</span></label>
                <input
                  type="email"
                  class="form-control"
                  id="contactEmail"
                  required
                  [(ngModel)]="supplier.contact_email"
                  name="contact_email"
                  #contactEmail="ngModel"
                  placeholder="Enter email address"
                />
                <div class="text-danger mt-1" *ngIf="contactEmail.invalid && contactEmail.touched">
                  Valid email is required.
                </div>
              </div>

              <!-- Address -->
              <div class="mb-3">
                <label for="address" class="form-label">Address</label>
                <input
                  type="text"
                  class="form-control"
                  id="address"
                  [(ngModel)]="supplier.address"
                  name="address"
                  placeholder="Enter street address"
                />
              </div>

              <div class="row">
                <!-- City -->
                <div class="col-md-6 mb-3">
                  <label for="city" class="form-label">City</label>
                  <input
                    type="text"
                    class="form-control"
                    id="city"
                    [(ngModel)]="supplier.city"
                    name="city"
                    placeholder="Enter city"
                  />
                </div>

                <!-- State -->
                <div class="col-md-6 mb-3">
                  <label for="state" class="form-label">State/Province</label>
                  <input
                    type="text"
                    class="form-control"
                    id="state"
                    [(ngModel)]="supplier.state"
                    name="state"
                    placeholder="Enter state/province"
                  />
                </div>
              </div>

              <div class="row">
                <!-- Country -->
                <div class="col-md-6 mb-3">
                  <label for="country" class="form-label">Country <span class="text-danger">*</span></label>
                  <input
                    type="text"
                    class="form-control"
                    id="country"
                    required
                    [(ngModel)]="supplier.country"
                    name="country"
                    #country="ngModel"
                    placeholder="Enter country"
                  />
                  <div class="text-danger mt-1" *ngIf="country.invalid && country.touched">
                    Country is required.
                  </div>
                </div>

                <!-- Postal Code -->
                <div class="col-md-6 mb-3">
                  <label for="postalCode" class="form-label">Postal Code</label>
                  <input
                    type="text"
                    class="form-control"
                    id="postalCode"
                    [(ngModel)]="supplier.postal_code"
                    name="postal_code"
                    placeholder="Enter postal code"
                  />
                </div>
              </div>

              <!-- Is Active -->
              <div class="mb-4 form-check">
                <input
                  type="checkbox"
                  class="form-check-input"
                  id="isActive"
                  [(ngModel)]="supplier.is_active"
                  name="is_active"
                />
                <label class="form-check-label" for="isActive">Active</label>
              </div>

              <!-- Alert for errors -->
              <div *ngIf="error" class="alert alert-danger" role="alert">
                {{ error }}
                <button type="button" class="btn-close float-end" (click)="error = ''"></button>
              </div>

              <!-- Buttons -->
              <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button type="button" class="btn btn-secondary me-md-2" routerLink="/suppliers">
                  Cancel
                </button>
                <button
                  type="submit"
                  class="btn btn-primary"
                  [disabled]="supplierForm.invalid || loading"
                >
                  <span *ngIf="loading" class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span>
                  Save
                </button>
              </div>
            </form>
          </div>

          <!-- Success message -->
          <div *ngIf="submitted">
            <div class="alert alert-success">
              <i class="fas fa-check-circle me-2"></i>
              {{ success }}
            </div>
            <div class="text-center mt-4">
              <button class="btn btn-primary me-2" (click)="newSupplier()">
                Add Another Supplier
              </button>
              <button class="btn btn-outline-primary" routerLink="/suppliers">
                Go to Suppliers List
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Help and information panel -->
    <div class="col-md-4">
      <div class="card mb-4">
        <div class="card-header bg-white">
          <h5 class="card-title mb-0"><i class="fas fa-info-circle me-2"></i>Adding a Supplier</h5>
        </div>
        <div class="card-body">
          <p>Fill in all required fields marked with <span class="text-danger">*</span> to create a new supplier.</p>
          <ul class="list-unstyled">
            <li class="mb-2"><i class="fas fa-check text-success me-2"></i> <strong>Company name</strong> should be the legal business name.</li>
            <li class="mb-2"><i class="fas fa-check text-success me-2"></i> <strong>Contact person</strong> is the primary contact at the supplier.</li>
            <li class="mb-2"><i class="fas fa-check text-success me-2"></i> <strong>Email</strong> is used for communications and purchase orders.</li>
            <li class="mb-2"><i class="fas fa-check text-success me-2"></i> <strong>Status</strong> determines if the supplier is active in your system.</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
